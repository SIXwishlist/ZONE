
<div class="row-fluid">

  <div class="span2" >
    <%= render "searches/left_menu", :searches => @searches %>
  </div>

  <div class="span1" ></div>
  <div class="span9">


    <%if @itemsNumber == 0%>
      <div class="row-fluid">
        <%= render "home/search_tool"%>
      </div>
    <%end%>

    <div class="hidden">
      <%= @search.to_json %>
      <%= @search.sources.to_json %>
      <%= @search.filters.to_json %>
      <hr/>

      <%= raw h(@sparqlRequest).gsub(/\n/, '<br/>') %>
      <hr/>
    </div>

  <%= javascript_tag do %>
    $("#load-more2").bind("ajax:complete", function(et, e){
    $("#load-more2").html(e.responseText); // insert content
        event.preventDefault(); // Prevent link from following its href
    });
  <% end %>

  <div class="row-fluid">
    <!-- items printing-->
    <div class="items-box items-list">
      <%= render :partial => "items", :items => @items %>
    </div>
    <div class="span12">
      <%= link_to 'Load More ITEMS', items_path(:page => @items.next_page, :search => @search.id), :class => 'btn load-more-items', :remote => true if @items.next_page != nil%>
      <% will_paginate @page_results, renderer: BootstrapPagination::Rails, class: "pagination pagination-centered"%>
    </div>
  </div>
</div>


<!-- modals -->
<% if user_signed_in?%>
    <div id="modalDeleteTag" class="modal hide fade" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel"><%= raw t 'items.modal.delete.title' %></h3>
      </div>
      <div class="modal-body deleteTag">
        <div class="row-fluid">
          <div class="span12">
            <%= raw t 'items.modal.delete.content' %>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="modalDeleteTagButton" onClick="doDeleteTag($(this))" class="btn btn-success"><%= raw t 'items.modal.delete.delete' %></button>
        <button class="btn" data-dismiss="modal" aria-hidden="true"><%= raw t 'items.modal.delete.cancel' %></button>
      </div>
    </div>
<%else%>
    <div id="modalDeleteTag" class="modal hide fade" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel"><%= raw t 'items.modal.delete.title' %></h3>
      </div>
      <div class="modal-body deleteTag">
        <div class="row-fluid">
          <div class="span12">
            <%= raw t 'devise.failure.unauthenticated' %>
          </div>
        </div>
      </div>
    </div>
<%end%>

<div id="modalEditTag" class="modal hide fade" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel"><%= raw t 'items.modal.edit.title' %></h3>
  </div>
  <div class="modal-body deleteTag">
    <div class="row-fluid">
      <div class="span12">
        <%= raw t 'items.modal.edit.content' %>
        <input id="inputEditTag" name="tagName" type="text" placeholder="">
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn btn-success"><%= raw t 'items.modal.edit.update' %></button>
    <button class="btn" data-dismiss="modal" aria-hidden="true"><%= raw t 'items.modal.edit.cancel' %></button>
  </div>
</div>